import { Component, OnInit } from '@angular/core';
import { SectionTag } from "../section-tag/section-tag";
import { ISvgColors } from '../../interfaces/isvg-link';
import { ThemeService } from '../../services/theme.service';
import { CommonModule } from '@angular/common';
import { HeaderService } from '../../services/header.service';
import { MenuCard } from "../menu-card-container/menu-card/menu-card";
import { IMenuCard } from '../../interfaces/imenu-card';
import { KundliForm } from "../kundli-form/kundli-form";
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';
import { RudrakshSection } from "../rudraksh-section/rudraksh-section";
import { AstrologySection } from "../astrology-section/astrology-section";
import { AboutSection } from "../about-section/about-section";
import { FAQSection } from "../faq-section/faq-section";
import { IFeatureCard } from '../../interfaces/ifeature-card';
import { FeatureCardT1 } from "../feature-card-t1/feature-card-t1";
import { IKundliForm, IMatchData } from '../../interfaces/ikundli-form';
import { FormService } from '../../services/form.service';
import { Router } from '@angular/router';

type TGender = 'm' | 'f';

@Component({
  selector: 'app-kundli-matching',
  imports: [
    SectionTag,
    CommonModule,
    MenuCard,
    KundliForm,
    RudrakshSection,
    AstrologySection,
    AboutSection,
    FAQSection,
    FeatureCardT1
],
  templateUrl: './kundli-matching.html',
  styleUrl: './kundli-matching.css'
})
export class KundliMatching implements OnInit {

  svgColor!: ISvgColors;
  sectionBrief = "Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat. In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos";

  formsCard: IMenuCard[] = [
    {
      heading: "Boy’s Details",
      sub: "Know your future from the best of horoscope readers.",
      blurColor: "#14A1FF",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
  <path d="M29.3126 1.08801H20.4806C19.5846 1.08801 18.8806 1.79201 18.8806 2.68801C18.8806 3.58401 19.5846 4.28801 20.4806 4.28801H25.4086L19.5206 10.176C14.9766 6.78401 8.51264 7.10401 4.41664 11.2C-0.0633594 15.68 -0.0633594 23.04 4.41664 27.52C8.89664 32 16.2566 32 20.7366 27.52C24.8326 23.424 25.2166 16.896 21.7606 12.416L27.6486 6.52801V11.52C27.6486 12.416 28.3526 13.12 29.2486 13.12C30.1446 13.12 30.8486 12.416 30.8486 11.52V2.68801C30.9126 1.79201 30.2086 1.08801 29.3126 1.08801ZM18.5606 25.28C15.2966 28.544 9.98464 28.544 6.72064 25.28C3.45664 22.016 3.45664 16.704 6.72064 13.44C9.98464 10.176 15.2966 10.176 18.5606 13.44C21.8246 16.704 21.8246 22.016 18.5606 25.28Z" fill="#240028"/>
</svg>`,
      width: '430px',
    },
    {
      heading: "Girls’s Details",
      sub: "Know your future from the best of horoscope readers.",
      blurColor: "#FB2B3A",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
  <g clip-path="url(#clip0_1268_117)">
    <path d="M23.5165 18.1358C27.6612 13.9925 27.6612 7.25078 23.5165 3.10747C19.3719 -1.0359 12.6282 -1.0359 8.48347 3.10747C4.33884 7.25078 4.33884 13.9925 8.48347 18.1358C10.2378 19.8896 12.4579 20.9008 14.7493 21.1699V24.7276H12.2482C11.5575 24.7276 10.9977 25.2873 10.9977 25.9778C10.9977 26.6682 11.5575 27.228 12.2482 27.228H14.7493V30.7497C14.7494 31.4402 15.3093 31.9999 16 31.9999C16.6907 31.9999 17.2506 31.4402 17.2506 30.7497V27.228H19.7518C20.4425 27.228 21.0023 26.6682 21.0023 25.9778C21.0023 25.2873 20.4425 24.7276 19.7518 24.7276H17.2506V21.17C19.5421 20.9008 21.7622 19.8896 23.5165 18.1358ZM10.2521 16.3677C7.08266 13.1993 7.08266 8.04391 10.2521 4.87547C13.4215 1.70716 18.5784 1.70697 21.748 4.87547C24.9174 8.04391 24.9174 13.1993 21.748 16.3677C18.5785 19.5361 13.4215 19.5361 10.2521 16.3677Z" fill="#240028"/>
  </g>
  <defs>
    <clipPath id="clip0_1268_117">
      <rect width="32" height="32" fill="white"/>
    </clipPath>
  </defs>
</svg>`,
      width: '430px',
    },
  ]

  features: {
      heading: string;
      subHeading: string;
      svgName: string;
    }[] = [
      {
        heading: "100% Secure and confidential",
        subHeading: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut l.",
        svgName: "confidential.svg",
      },
      {
        heading: "Fully Accurate",
        subHeading: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut l.",
        svgName: "accurate.svg",
      },
      {
        heading: "Personalised curated insights",
        subHeading: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut l.",
        svgName: "currated.svg",
      },
      {
        heading: "Instant results",
        subHeading: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut l.",
        svgName: "instant.svg",
      },
    ];

  steps: string[] = [
    "Add First Partner’s Details",
    "Add Second Partner’s Details",
    "Generate Kundlies",
    "Match Kundlies",
    "Generate Detailed Report",
  ]

  stepsDone: number = -1;

  kundliFeatureCards: IFeatureCard[] = [
    {
      title: "36 Guna Matching",
      brief: "Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus..",
      clickLink: "Generate Your Kundli",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
  <g clip-path="url(#clip0_1186_3358)">
    <path d="M8.68764 22.2548C5.19182 22.057 2.40833 19.1505 2.40833 15.6058C2.40833 11.9334 5.39581 8.94565 9.06789 8.94565C10.7102 8.94565 12.2872 9.54826 13.5084 10.6425C14.9188 11.904 15.728 13.7132 15.728 15.6057C15.728 17.1929 15.1586 18.7212 14.1428 19.9175C14.8632 20.3843 15.6904 20.6632 16.5524 20.7268C17.5898 19.2166 18.1363 17.4544 18.1363 15.6057C18.1363 13.6251 17.5092 11.7438 16.323 10.1653C15.3805 8.9105 14.126 7.91718 12.6952 7.29252C11.9021 6.94565 11.0729 6.71748 10.2188 6.60985C11.9452 5.33899 12.6054 4.27385 12.6054 3.34483C12.6054 2.23001 11.7016 1.32629 10.5868 1.32629C9.98105 1.32629 9.43807 1.59347 9.06809 2.01597C8.69811 1.59347 8.15507 1.32629 7.54936 1.32629C6.43454 1.32629 5.53082 2.23001 5.53082 3.34483C5.53082 4.274 6.19119 5.3393 7.91817 6.61041C3.459 7.17716 0 10.9951 0 15.6058C0 20.6058 4.06781 24.6736 9.06789 24.6736C9.75919 24.6736 10.4378 24.5969 11.0985 24.4457C10.1908 23.8455 9.37554 23.1067 8.68764 22.2548Z" fill="#FB2B74"/>
    <path d="M16.9317 6.53796C16.2403 6.53796 15.5617 6.61466 14.901 6.76582C15.8087 7.3661 16.624 8.10495 17.3119 8.95681C20.8077 9.1546 23.5912 12.0611 23.5912 15.6058C23.5912 19.2782 20.6038 22.2659 16.9317 22.2659C15.2895 22.2659 13.7124 21.6633 12.4911 20.5691C11.0808 19.3075 10.2716 17.4983 10.2716 15.6058C10.2716 14.0187 10.841 12.4903 11.8568 11.294C11.1363 10.8272 10.3092 10.5483 9.44718 10.4847C8.40972 11.9949 7.86328 13.757 7.86328 15.6058C7.86328 17.5864 8.49028 19.4677 9.67656 21.0463C10.6191 22.301 11.8735 23.2943 13.3044 23.919C14.4495 24.4198 15.6697 24.6736 16.9317 24.6736C21.9318 24.6736 25.9996 20.6058 25.9996 15.6058C25.9995 10.6058 21.9317 6.53796 16.9317 6.53796Z" fill="#FB2B74"/>
  </g>
  <defs>
    <clipPath id="clip0_1186_3358">
      <rect width="26" height="26" fill="white"/>
    </clipPath>
  </defs>
      </svg>`,
      svgBg: "#FFE5EE"
    },
    {
      title: "Planetary Alignment",
      brief: "Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus..",
      clickLink: "Generate Your Kundli",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
  <g clip-path="url(#clip0_1186_3324)">
    <path d="M23.4671 9.73242C21.7105 12.031 19.4868 14.5458 17.015 17.0176C14.5439 19.4888 12.0291 21.7124 9.73047 23.469C10.7751 23.7939 11.8741 23.9629 12.9993 23.9629C15.9272 23.9629 18.68 22.8227 20.7503 20.7523C22.8207 18.6819 23.961 15.9291 23.9609 13.0013C23.9609 11.8761 23.7919 10.777 23.4671 9.73242Z" fill="#B200FF"/>
    <path d="M25.539 0.462849C24.5715 -0.504786 22.7772 0.303447 22.1877 0.569032C21.024 1.09325 19.5556 1.99938 17.9212 3.19985C17.4028 2.93889 16.8642 2.72104 16.3105 2.54635C15.2536 2.21312 14.1405 2.0395 13.0006 2.03955C10.0728 2.0395 7.31996 3.17979 5.24966 5.25014C3.17927 7.32054 2.03908 10.0732 2.03903 13.0011C2.03908 14.5842 2.37296 16.1157 3.00631 17.5161C3.06795 17.6524 3.13245 17.7874 3.19978 17.9211C2.83248 18.4209 2.49123 18.9066 2.18299 19.3693C2.18289 19.3694 2.18284 19.3694 2.18279 19.3695C1.26741 20.7429 0.631271 21.92 0.292104 22.8682C-0.145224 24.0906 -0.0879425 24.9894 0.462322 25.5398C1.01264 26.0901 1.91187 26.1471 3.13493 25.7094C4.08348 25.3699 5.26114 24.7333 6.63528 23.8173C9.39554 21.9771 12.6998 19.1796 15.9394 15.9399C15.9398 15.9395 15.9398 15.9395 15.9402 15.9391C19.1793 12.7 21.9767 9.39581 23.8167 6.63581C24.7327 5.26167 25.3694 4.08405 25.7088 3.13541C26.1464 1.91235 26.0893 1.01316 25.539 0.462849ZM6.05084 22.3737C3.06521 24.4063 1.78207 24.5669 1.54162 24.4602C1.44052 24.2309 1.58073 23.0197 3.45054 20.2146C3.45059 20.2145 3.45064 20.2144 3.45064 20.2144C3.6395 19.931 3.84145 19.6383 4.05473 19.3384C4.33982 19.739 4.65288 20.1229 4.99408 20.4873C5.07777 20.5767 5.16247 20.6652 5.24951 20.7523C5.31365 20.8164 5.37845 20.8796 5.4439 20.942C5.82887 21.3088 6.23629 21.6442 6.6625 21.9475H6.66265C6.45602 22.0945 6.25188 22.2368 6.05084 22.3737ZM22.373 6.05167C22.2363 6.25256 22.0937 6.45675 21.9468 6.66328C21.6434 6.23702 21.3081 5.82965 20.9413 5.44458C20.8789 5.37918 20.8157 5.31438 20.7517 5.25029C20.6875 5.18611 20.6227 5.12293 20.5574 5.06062C20.1723 4.69383 19.765 4.35842 19.3387 4.05516H19.3387C20.5862 3.16816 21.7082 2.48115 22.6217 2.04717C23.9369 1.42231 24.3872 1.51986 24.4604 1.54408C24.5654 1.78864 24.4009 3.0727 22.373 6.05167Z" fill="#B200FF"/>
  </g>
  <defs>
    <clipPath id="clip0_1186_3324">
      <rect width="26" height="26" fill="white"/>
    </clipPath>
  </defs>
      </svg>`,
      svgBg: "#F4D9FF"
    },
    {
      title: "Spouse characteristics analysis",
      brief: "Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus..",
      clickLink: "Generate Your Kundli",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
  <path d="M13 17.875C13.2244 17.875 13.4062 17.6931 13.4062 17.4688C13.4062 17.2444 13.2244 17.0625 13 17.0625C12.7756 17.0625 12.5938 17.2444 12.5938 17.4688C12.5938 17.6931 12.7756 17.875 13 17.875Z" fill="#590019"/>
  <path d="M9.83984 16.566C10.0642 16.566 10.2461 16.3842 10.2461 16.1598C10.2461 15.9354 10.0642 15.7535 9.83984 15.7535C9.61548 15.7535 9.43359 15.9354 9.43359 16.1598C9.43359 16.3842 9.61548 16.566 9.83984 16.566Z" fill="#590019"/>
  <path d="M17.4688 13.4062C17.6931 13.4062 17.875 13.2244 17.875 13C17.875 12.7756 17.6931 12.5938 17.4688 12.5938C17.2444 12.5938 17.0625 12.7756 17.0625 13C17.0625 13.2244 17.2444 13.4062 17.4688 13.4062Z" fill="#590019"/>
  <path d="M16.1602 16.566C16.3845 16.566 16.5664 16.3842 16.5664 16.1598C16.5664 15.9354 16.3845 15.7535 16.1602 15.7535C15.9358 15.7535 15.7539 15.9354 15.7539 16.1598C15.7539 16.3842 15.9358 16.566 16.1602 16.566Z" fill="#590019"/>
  <path d="M13 14.2188C13.6731 14.2188 14.2188 13.6731 14.2188 13C14.2188 12.3269 13.6731 11.7812 13 11.7812C12.3269 11.7812 11.7812 12.3269 11.7812 13C11.7812 13.6731 12.3269 14.2188 13 14.2188Z" fill="#590019"/>
  <path d="M16.1602 10.2465C16.3845 10.2465 16.5664 10.0646 16.5664 9.84021C16.5664 9.61584 16.3845 9.43396 16.1602 9.43396C15.9358 9.43396 15.7539 9.61584 15.7539 9.84021C15.7539 10.0646 15.9358 10.2465 16.1602 10.2465Z" fill="#590019"/>
  <path d="M19.9063 13C19.9063 11.6341 19.5012 10.2988 18.7423 9.1631C17.9835 8.02737 16.9049 7.14218 15.6429 6.61946C14.381 6.09674 12.9923 5.95998 11.6527 6.22645C10.313 6.49293 9.0824 7.15069 8.11655 8.11655C7.15069 9.0824 6.49293 10.313 6.22645 11.6527C5.95998 12.9923 6.09674 14.381 6.61946 15.6429C7.14218 16.9049 8.02737 17.9835 9.1631 18.7423C10.2988 19.5012 11.6341 19.9063 13 19.9063C14.831 19.9042 16.5865 19.1759 17.8812 17.8812C19.1759 16.5865 19.9042 14.831 19.9063 13ZM16.1598 8.62144C16.4009 8.62144 16.6365 8.69292 16.8369 8.82684C17.0373 8.96075 17.1935 9.1511 17.2858 9.3738C17.378 9.59649 17.4022 9.84154 17.3551 10.078C17.3081 10.3144 17.192 10.5315 17.0216 10.702C16.8512 10.8724 16.634 10.9885 16.3976 11.0355C16.1612 11.0825 15.9161 11.0584 15.6934 10.9662C15.4707 10.8739 15.2804 10.7177 15.1465 10.5173C15.0125 10.3169 14.9411 10.0812 14.9411 9.84019C14.9411 9.51696 15.0695 9.20696 15.298 8.9784C15.5266 8.74984 15.8366 8.62144 16.1598 8.62144ZM13 7.3125C13.241 7.3125 13.4767 7.38398 13.6771 7.5179C13.8775 7.65182 14.0337 7.84216 14.126 8.06486C14.2182 8.28755 14.2424 8.53261 14.1953 8.76902C14.1483 9.00543 14.0322 9.22259 13.8618 9.39304C13.6913 9.56348 13.4742 9.67956 13.2378 9.72659C13.0014 9.77361 12.7563 9.74948 12.5336 9.65723C12.3109 9.56499 12.1206 9.40878 11.9866 9.20835C11.8527 9.00793 11.7813 8.7723 11.7813 8.53125C11.7813 8.20802 11.9097 7.89803 12.1382 7.66947C12.3668 7.44091 12.6768 7.3125 13 7.3125ZM9.84019 8.62144C10.0812 8.62144 10.3169 8.69292 10.5173 8.82684C10.7177 8.96075 10.8739 9.1511 10.9662 9.3738C11.0584 9.59649 11.0825 9.84154 11.0355 10.078C10.9885 10.3144 10.8724 10.5315 10.702 10.702C10.5315 10.8724 10.3144 10.9885 10.078 11.0355C9.84154 11.0825 9.59649 11.0584 9.3738 10.9662C9.1511 10.8739 8.96075 10.7177 8.82684 10.5173C8.69292 10.3169 8.62144 10.0812 8.62144 9.84019C8.62144 9.51696 8.74984 9.20696 8.9784 8.9784C9.20696 8.74984 9.51696 8.62144 9.84019 8.62144ZM7.3125 13C7.3125 12.759 7.38398 12.5233 7.5179 12.3229C7.65182 12.1225 7.84216 11.9663 8.06486 11.874C8.28755 11.7818 8.53261 11.7576 8.76902 11.8047C9.00543 11.8517 9.22259 11.9678 9.39304 12.1382C9.56348 12.3087 9.67956 12.5258 9.72659 12.7622C9.77361 12.9987 9.74948 13.2437 9.65723 13.4664C9.56499 13.6891 9.40878 13.8794 9.20835 14.0134C9.00793 14.1473 8.7723 14.2188 8.53125 14.2188C8.20802 14.2188 7.89803 14.0903 7.66947 13.8618C7.44091 13.6332 7.3125 13.3232 7.3125 13ZM9.84019 17.3786C9.59914 17.3786 9.36351 17.3071 9.16309 17.1732C8.96267 17.0393 8.80646 16.8489 8.71421 16.6262C8.62197 16.4035 8.59783 16.1585 8.64486 15.922C8.69188 15.6856 8.80796 15.4685 8.9784 15.298C9.14885 15.1276 9.36601 15.0115 9.60242 14.9645C9.83884 14.9175 10.0839 14.9416 10.3066 15.0338C10.5293 15.1261 10.7196 15.2823 10.8535 15.4827C10.9875 15.6831 11.0589 15.9188 11.0589 16.1598C11.0589 16.483 10.9305 16.793 10.702 17.0216C10.4734 17.2502 10.1634 17.3786 9.84019 17.3786ZM13 18.6875C12.759 18.6875 12.5233 18.616 12.3229 18.4821C12.1225 18.3482 11.9663 18.1578 11.874 17.9351C11.7818 17.7125 11.7576 17.4674 11.8047 17.231C11.8517 16.9946 11.9678 16.7774 12.1382 16.607C12.3087 16.4365 12.5258 16.3204 12.7622 16.2734C12.9987 16.2264 13.2437 16.2505 13.4664 16.3428C13.6891 16.435 13.8794 16.5912 14.0134 16.7917C14.1473 16.9921 14.2188 17.2277 14.2188 17.4688C14.2188 17.792 14.0903 18.102 13.8618 18.3305C13.6332 18.5591 13.3232 18.6875 13 18.6875ZM13 15.0313C12.5983 15.0313 12.2055 14.9121 11.8715 14.6889C11.5375 14.4657 11.2771 14.1485 11.1234 13.7773C10.9696 13.4062 10.9294 12.9977 11.0078 12.6037C11.0862 12.2097 11.2796 11.8478 11.5637 11.5637C11.8478 11.2796 12.2097 11.0862 12.6037 11.0078C12.9977 10.9294 13.4062 10.9696 13.7773 11.1234C14.1485 11.2771 14.4657 11.5375 14.6889 11.8715C14.9121 12.2055 15.0313 12.5983 15.0313 13C15.0306 13.5385 14.8164 14.0548 14.4356 14.4356C14.0548 14.8164 13.5385 15.0306 13 15.0313ZM16.1598 17.3786C15.9188 17.3786 15.6831 17.3071 15.4827 17.1732C15.2823 17.0393 15.1261 16.8489 15.0338 16.6262C14.9416 16.4035 14.9175 16.1585 14.9645 15.922C15.0115 15.6856 15.1276 15.4685 15.298 15.298C15.4685 15.1276 15.6856 15.0115 15.922 14.9645C16.1585 14.9175 16.4035 14.9416 16.6262 15.0338C16.8489 15.1261 17.0393 15.2823 17.1732 15.4827C17.3071 15.6831 17.3786 15.9188 17.3786 16.1598C17.3786 16.483 17.2502 16.793 17.0216 17.0216C16.793 17.2502 16.483 17.3786 16.1598 17.3786ZM16.25 13C16.25 12.759 16.3215 12.5233 16.4554 12.3229C16.5893 12.1225 16.7797 11.9663 17.0024 11.874C17.2251 11.7818 17.4701 11.7576 17.7065 11.8047C17.9429 11.8517 18.1601 11.9678 18.3305 12.1382C18.501 12.3087 18.6171 12.5258 18.6641 12.7622C18.7111 12.9987 18.687 13.2437 18.5947 13.4664C18.5025 13.6891 18.3463 13.8794 18.1459 14.0134C17.9454 14.1473 17.7098 14.2188 17.4688 14.2188C17.1455 14.2188 16.8355 14.0903 16.607 13.8618C16.3784 13.6332 16.25 13.3232 16.25 13Z" fill="#590019"/>
  <path d="M7.4668 23.3971C9.04816 24.2416 10.8023 24.7117 12.5941 24.7711V20.698C11.5167 20.6435 10.463 20.3619 9.50211 19.8717L7.4668 23.3971Z" fill="#590019"/>
  <path d="M9.83984 10.2465C10.0642 10.2465 10.2461 10.0646 10.2461 9.84021C10.2461 9.61584 10.0642 9.43396 9.83984 9.43396C9.61548 9.43396 9.43359 9.61584 9.43359 9.84021C9.43359 10.0646 9.61548 10.2465 9.83984 10.2465Z" fill="#590019"/>
  <path d="M13 8.9375C13.2244 8.9375 13.4062 8.75562 13.4062 8.53125C13.4062 8.30688 13.2244 8.125 13 8.125C12.7756 8.125 12.5938 8.30688 12.5938 8.53125C12.5938 8.75562 12.7756 8.9375 13 8.9375Z" fill="#590019"/>
  <path d="M8.53125 13.4062C8.75562 13.4062 8.9375 13.2244 8.9375 13C8.9375 12.7756 8.75562 12.5938 8.53125 12.5938C8.30688 12.5938 8.125 12.7756 8.125 13C8.125 13.2244 8.30688 13.4062 8.53125 13.4062Z" fill="#590019"/>
  <path d="M18.5335 23.3971L16.4982 19.8717C15.5373 20.3619 14.4836 20.6435 13.4062 20.698V24.7711C15.198 24.7117 16.9522 24.2416 18.5335 23.3971Z" fill="#590019"/>
  <path d="M7.4668 2.60282L9.50211 6.12826C10.463 5.63807 11.5167 5.35648 12.5941 5.30194V1.22888C10.8023 1.28827 9.04816 1.75833 7.4668 2.60282Z" fill="#590019"/>
  <path d="M18.5335 2.60282C16.9522 1.75833 15.198 1.28827 13.4062 1.22888V5.30194C14.4836 5.35648 15.5373 5.63807 16.4982 6.12826L18.5335 2.60282Z" fill="#590019"/>
  <path d="M6.53472 8.79773C7.12408 7.89435 7.89496 7.12347 8.79834 6.53411L6.76466 3.01111C5.24654 3.96291 3.96352 5.24593 3.01172 6.76405L6.53472 8.79773Z" fill="#590019"/>
  <path d="M19.8711 9.50174C20.3613 10.4627 20.6429 11.5164 20.6974 12.5937H24.7705C24.7111 10.802 24.241 9.04779 23.3965 7.46643L19.8711 9.50174Z" fill="#590019"/>
  <path d="M17.2031 6.53411C18.1065 7.12347 18.8774 7.89435 19.4667 8.79773L22.9897 6.76405C22.038 5.24593 20.7549 3.96291 19.2368 3.01111L17.2031 6.53411Z" fill="#590019"/>
  <path d="M24.7705 13.4062H20.6974C20.6429 14.4836 20.3613 15.5373 19.8711 16.4982L23.3965 18.5335C24.241 16.9522 24.7111 15.198 24.7705 13.4062Z" fill="#590019"/>
  <path d="M19.4667 17.2023C18.8774 18.1057 18.1065 18.8765 17.2031 19.4659L19.2368 22.9889C20.7549 22.0371 22.038 20.7541 22.9897 19.236L19.4667 17.2023Z" fill="#590019"/>
  <path d="M6.12789 16.4982C5.6377 15.5373 5.35611 14.4836 5.30158 13.4062H1.22852C1.2879 15.198 1.75796 16.9522 2.60245 18.5335L6.12789 16.4982Z" fill="#590019"/>
  <path d="M6.12789 9.50174L2.60245 7.46643C1.75796 9.04779 1.2879 10.802 1.22852 12.5937H5.30158C5.35611 11.5164 5.6377 10.4627 6.12789 9.50174Z" fill="#590019"/>
  <path d="M8.79834 19.4659C7.89496 18.8765 7.12408 18.1057 6.53472 17.2023L3.01172 19.236C3.96352 20.7541 5.24654 22.0371 6.76466 22.9889L8.79834 19.4659Z" fill="#590019"/>
      </svg>`,
      svgBg: "#FFD6F8"
    },
    {
      title: "Compatibility With Partner",
      brief: "Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus.Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus..",
      clickLink: "Generate Your Kundli",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
  <path d="M13 17.875C13.2244 17.875 13.4062 17.6931 13.4062 17.4688C13.4062 17.2444 13.2244 17.0625 13 17.0625C12.7756 17.0625 12.5938 17.2444 12.5938 17.4688C12.5938 17.6931 12.7756 17.875 13 17.875Z" fill="#590019"/>
  <path d="M9.83984 16.566C10.0642 16.566 10.2461 16.3842 10.2461 16.1598C10.2461 15.9354 10.0642 15.7535 9.83984 15.7535C9.61548 15.7535 9.43359 15.9354 9.43359 16.1598C9.43359 16.3842 9.61548 16.566 9.83984 16.566Z" fill="#590019"/>
  <path d="M17.4688 13.4062C17.6931 13.4062 17.875 13.2244 17.875 13C17.875 12.7756 17.6931 12.5938 17.4688 12.5938C17.2444 12.5938 17.0625 12.7756 17.0625 13C17.0625 13.2244 17.2444 13.4062 17.4688 13.4062Z" fill="#590019"/>
  <path d="M16.1602 16.566C16.3845 16.566 16.5664 16.3842 16.5664 16.1598C16.5664 15.9354 16.3845 15.7535 16.1602 15.7535C15.9358 15.7535 15.7539 15.9354 15.7539 16.1598C15.7539 16.3842 15.9358 16.566 16.1602 16.566Z" fill="#590019"/>
  <path d="M13 14.2188C13.6731 14.2188 14.2188 13.6731 14.2188 13C14.2188 12.3269 13.6731 11.7812 13 11.7812C12.3269 11.7812 11.7812 12.3269 11.7812 13C11.7812 13.6731 12.3269 14.2188 13 14.2188Z" fill="#590019"/>
  <path d="M16.1602 10.2465C16.3845 10.2465 16.5664 10.0646 16.5664 9.84021C16.5664 9.61584 16.3845 9.43396 16.1602 9.43396C15.9358 9.43396 15.7539 9.61584 15.7539 9.84021C15.7539 10.0646 15.9358 10.2465 16.1602 10.2465Z" fill="#590019"/>
  <path d="M19.9063 13C19.9063 11.6341 19.5012 10.2988 18.7423 9.1631C17.9835 8.02737 16.9049 7.14218 15.6429 6.61946C14.381 6.09674 12.9923 5.95998 11.6527 6.22645C10.313 6.49293 9.0824 7.15069 8.11655 8.11655C7.15069 9.0824 6.49293 10.313 6.22645 11.6527C5.95998 12.9923 6.09674 14.381 6.61946 15.6429C7.14218 16.9049 8.02737 17.9835 9.1631 18.7423C10.2988 19.5012 11.6341 19.9063 13 19.9063C14.831 19.9042 16.5865 19.1759 17.8812 17.8812C19.1759 16.5865 19.9042 14.831 19.9063 13ZM16.1598 8.62144C16.4009 8.62144 16.6365 8.69292 16.8369 8.82684C17.0373 8.96075 17.1935 9.1511 17.2858 9.3738C17.378 9.59649 17.4022 9.84154 17.3551 10.078C17.3081 10.3144 17.192 10.5315 17.0216 10.702C16.8512 10.8724 16.634 10.9885 16.3976 11.0355C16.1612 11.0825 15.9161 11.0584 15.6934 10.9662C15.4707 10.8739 15.2804 10.7177 15.1465 10.5173C15.0125 10.3169 14.9411 10.0812 14.9411 9.84019C14.9411 9.51696 15.0695 9.20696 15.298 8.9784C15.5266 8.74984 15.8366 8.62144 16.1598 8.62144ZM13 7.3125C13.241 7.3125 13.4767 7.38398 13.6771 7.5179C13.8775 7.65182 14.0337 7.84216 14.126 8.06486C14.2182 8.28755 14.2424 8.53261 14.1953 8.76902C14.1483 9.00543 14.0322 9.22259 13.8618 9.39304C13.6913 9.56348 13.4742 9.67956 13.2378 9.72659C13.0014 9.77361 12.7563 9.74948 12.5336 9.65723C12.3109 9.56499 12.1206 9.40878 11.9866 9.20835C11.8527 9.00793 11.7813 8.7723 11.7813 8.53125C11.7813 8.20802 11.9097 7.89803 12.1382 7.66947C12.3668 7.44091 12.6768 7.3125 13 7.3125ZM9.84019 8.62144C10.0812 8.62144 10.3169 8.69292 10.5173 8.82684C10.7177 8.96075 10.8739 9.1511 10.9662 9.3738C11.0584 9.59649 11.0825 9.84154 11.0355 10.078C10.9885 10.3144 10.8724 10.5315 10.702 10.702C10.5315 10.8724 10.3144 10.9885 10.078 11.0355C9.84154 11.0825 9.59649 11.0584 9.3738 10.9662C9.1511 10.8739 8.96075 10.7177 8.82684 10.5173C8.69292 10.3169 8.62144 10.0812 8.62144 9.84019C8.62144 9.51696 8.74984 9.20696 8.9784 8.9784C9.20696 8.74984 9.51696 8.62144 9.84019 8.62144ZM7.3125 13C7.3125 12.759 7.38398 12.5233 7.5179 12.3229C7.65182 12.1225 7.84216 11.9663 8.06486 11.874C8.28755 11.7818 8.53261 11.7576 8.76902 11.8047C9.00543 11.8517 9.22259 11.9678 9.39304 12.1382C9.56348 12.3087 9.67956 12.5258 9.72659 12.7622C9.77361 12.9987 9.74948 13.2437 9.65723 13.4664C9.56499 13.6891 9.40878 13.8794 9.20835 14.0134C9.00793 14.1473 8.7723 14.2188 8.53125 14.2188C8.20802 14.2188 7.89803 14.0903 7.66947 13.8618C7.44091 13.6332 7.3125 13.3232 7.3125 13ZM9.84019 17.3786C9.59914 17.3786 9.36351 17.3071 9.16309 17.1732C8.96267 17.0393 8.80646 16.8489 8.71421 16.6262C8.62197 16.4035 8.59783 16.1585 8.64486 15.922C8.69188 15.6856 8.80796 15.4685 8.9784 15.298C9.14885 15.1276 9.36601 15.0115 9.60242 14.9645C9.83884 14.9175 10.0839 14.9416 10.3066 15.0338C10.5293 15.1261 10.7196 15.2823 10.8535 15.4827C10.9875 15.6831 11.0589 15.9188 11.0589 16.1598C11.0589 16.483 10.9305 16.793 10.702 17.0216C10.4734 17.2502 10.1634 17.3786 9.84019 17.3786ZM13 18.6875C12.759 18.6875 12.5233 18.616 12.3229 18.4821C12.1225 18.3482 11.9663 18.1578 11.874 17.9351C11.7818 17.7125 11.7576 17.4674 11.8047 17.231C11.8517 16.9946 11.9678 16.7774 12.1382 16.607C12.3087 16.4365 12.5258 16.3204 12.7622 16.2734C12.9987 16.2264 13.2437 16.2505 13.4664 16.3428C13.6891 16.435 13.8794 16.5912 14.0134 16.7917C14.1473 16.9921 14.2188 17.2277 14.2188 17.4688C14.2188 17.792 14.0903 18.102 13.8618 18.3305C13.6332 18.5591 13.3232 18.6875 13 18.6875ZM13 15.0313C12.5983 15.0313 12.2055 14.9121 11.8715 14.6889C11.5375 14.4657 11.2771 14.1485 11.1234 13.7773C10.9696 13.4062 10.9294 12.9977 11.0078 12.6037C11.0862 12.2097 11.2796 11.8478 11.5637 11.5637C11.8478 11.2796 12.2097 11.0862 12.6037 11.0078C12.9977 10.9294 13.4062 10.9696 13.7773 11.1234C14.1485 11.2771 14.4657 11.5375 14.6889 11.8715C14.9121 12.2055 15.0313 12.5983 15.0313 13C15.0306 13.5385 14.8164 14.0548 14.4356 14.4356C14.0548 14.8164 13.5385 15.0306 13 15.0313ZM16.1598 17.3786C15.9188 17.3786 15.6831 17.3071 15.4827 17.1732C15.2823 17.0393 15.1261 16.8489 15.0338 16.6262C14.9416 16.4035 14.9175 16.1585 14.9645 15.922C15.0115 15.6856 15.1276 15.4685 15.298 15.298C15.4685 15.1276 15.6856 15.0115 15.922 14.9645C16.1585 14.9175 16.4035 14.9416 16.6262 15.0338C16.8489 15.1261 17.0393 15.2823 17.1732 15.4827C17.3071 15.6831 17.3786 15.9188 17.3786 16.1598C17.3786 16.483 17.2502 16.793 17.0216 17.0216C16.793 17.2502 16.483 17.3786 16.1598 17.3786ZM16.25 13C16.25 12.759 16.3215 12.5233 16.4554 12.3229C16.5893 12.1225 16.7797 11.9663 17.0024 11.874C17.2251 11.7818 17.4701 11.7576 17.7065 11.8047C17.9429 11.8517 18.1601 11.9678 18.3305 12.1382C18.501 12.3087 18.6171 12.5258 18.6641 12.7622C18.7111 12.9987 18.687 13.2437 18.5947 13.4664C18.5025 13.6891 18.3463 13.8794 18.1459 14.0134C17.9454 14.1473 17.7098 14.2188 17.4688 14.2188C17.1455 14.2188 16.8355 14.0903 16.607 13.8618C16.3784 13.6332 16.25 13.3232 16.25 13Z" fill="#590019"/>
  <path d="M7.4668 23.3971C9.04816 24.2416 10.8023 24.7117 12.5941 24.7711V20.698C11.5167 20.6435 10.463 20.3619 9.50211 19.8717L7.4668 23.3971Z" fill="#590019"/>
  <path d="M9.83984 10.2465C10.0642 10.2465 10.2461 10.0646 10.2461 9.84021C10.2461 9.61584 10.0642 9.43396 9.83984 9.43396C9.61548 9.43396 9.43359 9.61584 9.43359 9.84021C9.43359 10.0646 9.61548 10.2465 9.83984 10.2465Z" fill="#590019"/>
  <path d="M13 8.9375C13.2244 8.9375 13.4062 8.75562 13.4062 8.53125C13.4062 8.30688 13.2244 8.125 13 8.125C12.7756 8.125 12.5938 8.30688 12.5938 8.53125C12.5938 8.75562 12.7756 8.9375 13 8.9375Z" fill="#590019"/>
  <path d="M8.53125 13.4062C8.75562 13.4062 8.9375 13.2244 8.9375 13C8.9375 12.7756 8.75562 12.5938 8.53125 12.5938C8.30688 12.5938 8.125 12.7756 8.125 13C8.125 13.2244 8.30688 13.4062 8.53125 13.4062Z" fill="#590019"/>
  <path d="M18.5335 23.3971L16.4982 19.8717C15.5373 20.3619 14.4836 20.6435 13.4062 20.698V24.7711C15.198 24.7117 16.9522 24.2416 18.5335 23.3971Z" fill="#590019"/>
  <path d="M7.4668 2.60282L9.50211 6.12826C10.463 5.63807 11.5167 5.35648 12.5941 5.30194V1.22888C10.8023 1.28827 9.04816 1.75833 7.4668 2.60282Z" fill="#590019"/>
  <path d="M18.5335 2.60282C16.9522 1.75833 15.198 1.28827 13.4062 1.22888V5.30194C14.4836 5.35648 15.5373 5.63807 16.4982 6.12826L18.5335 2.60282Z" fill="#590019"/>
  <path d="M6.53472 8.79773C7.12408 7.89435 7.89496 7.12347 8.79834 6.53411L6.76466 3.01111C5.24654 3.96291 3.96352 5.24593 3.01172 6.76405L6.53472 8.79773Z" fill="#590019"/>
  <path d="M19.8711 9.50174C20.3613 10.4627 20.6429 11.5164 20.6974 12.5937H24.7705C24.7111 10.802 24.241 9.04779 23.3965 7.46643L19.8711 9.50174Z" fill="#590019"/>
  <path d="M17.2031 6.53411C18.1065 7.12347 18.8774 7.89435 19.4667 8.79773L22.9897 6.76405C22.038 5.24593 20.7549 3.96291 19.2368 3.01111L17.2031 6.53411Z" fill="#590019"/>
  <path d="M24.7705 13.4062H20.6974C20.6429 14.4836 20.3613 15.5373 19.8711 16.4982L23.3965 18.5335C24.241 16.9522 24.7111 15.198 24.7705 13.4062Z" fill="#590019"/>
  <path d="M19.4667 17.2023C18.8774 18.1057 18.1065 18.8765 17.2031 19.4659L19.2368 22.9889C20.7549 22.0371 22.038 20.7541 22.9897 19.236L19.4667 17.2023Z" fill="#590019"/>
  <path d="M6.12789 16.4982C5.6377 15.5373 5.35611 14.4836 5.30158 13.4062H1.22852C1.2879 15.198 1.75796 16.9522 2.60245 18.5335L6.12789 16.4982Z" fill="#590019"/>
  <path d="M6.12789 9.50174L2.60245 7.46643C1.75796 9.04779 1.2879 10.802 1.22852 12.5937H5.30158C5.35611 11.5164 5.6377 10.4627 6.12789 9.50174Z" fill="#590019"/>
  <path d="M8.79834 19.4659C7.89496 18.8765 7.12408 18.1057 6.53472 17.2023L3.01172 19.236C3.96352 20.7541 5.24654 22.0371 6.76466 22.9889L8.79834 19.4659Z" fill="#590019"/>
      </svg>`,
      svgBg: "#FFD6F8"
    },
  ]

  otherReportComponents: {
    name: string;
    brief: string;
    svg: string;
  }[] = [
    {
      name: "Dasha and Doshas",
      brief: "You will be very enterprising and industrious today...",
      svg: "./images/kundli/dosha.svg",
    },
    {
      name: "Marriage Timing (Muhrat)",
      brief: "You will be very enterprising and industrious today...",
      svg: "./images/kundli/muhurat.svg",
    },
    {
      name: "Remedies",
      brief: "You will be very enterprising and industrious today...",
      svg: "./images/kundli/remedies.svg",
    },
  ]

  compatibilityCards: {
    point: string;
    name: string;
    brief: string;
    img: string;
  }[] = [
    {
      point: "Varna",
      name: "Spiritual compatibility",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-1.svg",
    },
    {
      point: "Vashya",
      name: "Mutual attraction & dominance",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-2.svg",
    },
    {
      point: "Tara",
      name: "Health & wellbeing",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
    {
      point: "Yoni",
      name: "Physical & sexual compatibility",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
    {
      point: "Graha Maitri",
      name: "Mental compatibility",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
    {
      point: "Gana",
      name: "Temperament matching",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
    {
      point: "Bhakoot",
      name: "Family welfare & prosperity",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
    {
      point: "Nadi",
      name: "Health of future progeny",
      brief: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,.",
      img: "./images/kundli/compatibility/point-.svg",
    },
  ]

  reportTags = [
    "Vedic Kundli",
    "Moon Chart",
    "KP Kundli",
    "Sun Chart",
    "Navamsa Chart",
    "Chalit Chart",
    "Langan Kundli",
    "Divisional Charts"
  ]

  forms: IMatchData = {
    boy: {
      name: "",
      dob: "",
      time: "",
      place: "",
      gender: "m",
    },
    girl: {
      name: "",
      dob: "",
      time: "",
      place: "",
      gender: "f",
    },
  };
  selectedCompatibilityOption: number = 0;

  constructor(private themeService: ThemeService, private headerService: HeaderService, private sanitizer: DomSanitizer, private formService: FormService, private router: Router) {}

  ngOnInit(): void {
   this.loadSvgColor();
   this.headerService.setColorSubject(false); 
   this.formSvgSanitizer();
   this.stepsDone = -1;
  }

  private loadSvgColor(): void {
    this.svgColor = this.themeService.getSvgColor();
  }

  private svgSanitizer( svg: string): SafeHtml {
    return this.sanitizer.bypassSecurityTrustHtml(svg);
  }

  private formSvgSanitizer() {
    this.formsCard.forEach(c => {
      c.svg = this.svgSanitizer(c.svg as string);
    });
  }

  compatibilityHover(ind: number) {
    setTimeout(() => {
      this.selectedCompatibilityOption = ind;
    }, 200);
  }

  submitForm() {
    console.log(this.forms);
    if (this.validForm(this.forms.boy) && this.validForm(this.forms.girl)){
      this.formService.setMatchData(this.forms);
      this.router.navigate(["home/kundli-matching/result",0]);
    }
  }

  updateForm(form: IKundliForm, gender: 'boy' | 'girl') {
    this.forms[gender] = form;
    let c = -1;
    if (this.validForm(this.forms.boy)){
      c+=1;
    } if (this.validForm(this.forms.girl)){
      c+=1;
    }
    this.stepsDone = c;
  }

  private validForm(form: IKundliForm): boolean {
    const requiredFields: (keyof IKundliForm)[] = ["dob", "gender", "name", "place", "time"];
    for (const field of requiredFields) {
      if (!form[field] || form[field].trim() === "") {
        return false;
      }
    }
    if (!/^\d{4}-\d{2}-\d{2}$/.test(form.dob)) {
      return false;
    }
    if (!/^(?:[01]\d|2[0-3]):[0-5]\d$/.test(form.time)) {
      return false;
    }
    return true;
  }

}
